(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{108:function(e,t,n){e.exports={listItem:"constructor-card_listItem__1dC_D"}},109:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__tfXD-"}},11:function(e,t,n){e.exports={page:"commonStyles_page__RgHLc",profilePage:"commonStyles_profilePage__32iZG",link:"commonStyles_link__nhBjk",profileLink:"commonStyles_profileLink__1yAyp",nav:"commonStyles_nav__2YJHQ",form:"commonStyles_form__35P2D",ingredient:"commonStyles_ingredient__1JPV4"}},110:function(e,t,n){e.exports={cont:"orders_cont__RN1yK",link:"orders_link__1KjGE"}},123:function(e,t,n){},19:function(e,t,n){e.exports={cont:"order-card_cont__1T4wa",top:"order-card_top__22sco",items:"order-card_items__2yoGX",images:"order-card_images__wE5Eu",totalCost:"order-card_totalCost__3I0Qx",done:"order-card_done__3lduW",canceled:"order-card_canceled__193MT",imageBorder:"order-card_imageBorder__wxRSS",image:"order-card_image__1LH_h",count:"order-card_count__grZBq"}},20:function(e,t,n){e.exports={cont:"feed-order-details_cont__1J7KV",name:"feed-order-details_name__34eZa",ingredContClass:"feed-order-details_ingredContClass__3ll7I",footer:"feed-order-details_footer__1t3w6",totalCost:"feed-order-details_totalCost__1G4rj",done:"feed-order-details_done__1F861",scrollCont:"feed-order-details_scrollCont__3XkPg",total:"feed-order-details_total__LH4GE",ingredient:"feed-order-details_ingredient__3LvTf",info:"feed-order-details_info__2YS22",status:"feed-order-details_status__1X28e",ingredients:"feed-order-details_ingredients__2hdwC",image:"feed-order-details_image__CDGvC",sum:"feed-order-details_sum__1tpqs",number:"feed-order-details_number__2x956"}},210:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(37),s=n.n(a),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,219)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},i=n(45),u=(n(123),n(216)),d=n(112),l=n(12),j=i.c,p=function(){return Object(i.b)()},b=n(79),m=n.n(b),O=n(29),f=n.n(O),_=n(4),x=n(6),h="https://norma.nomoreparties.space/api",g="/yap_burger",v=n(0),y=g,N=function(){var e=Object(l.h)().pathname.split("/")[1],t="mb-5 ".concat(f.a.header),n="".concat(f.a.nav),c="pr-5 pl-5 ".concat(f.a.navItem),r="pt-4 pr-5 pb-4 pl-5 ".concat(f.a.logo),a="text text_type_main-default pl-2",s="text text_type_main-default pl-2 text_color_inactive";return Object(v.jsx)("header",{className:t,children:Object(v.jsxs)("div",{className:f.a.content,children:[Object(v.jsxs)("nav",{className:n,children:[Object(v.jsx)(x.b,{to:"".concat(y,"/"),className:c,children:Object(v.jsxs)("h2",{className:f.a.navItem,children:[Object(v.jsx)(_.BurgerIcon,{type:""===e?"primary":"secondary"}),Object(v.jsx)("span",{className:""===e?a:s,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]})}),Object(v.jsx)(x.b,{to:"".concat(y,"/feed"),className:c,children:Object(v.jsxs)("h2",{className:f.a.navItem,children:[Object(v.jsx)(_.ListIcon,{type:"feed"===e?"primary":"secondary"}),Object(v.jsx)("span",{className:"feed"===e?a:s,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})})]}),Object(v.jsx)("h2",{className:r,children:Object(v.jsx)(x.b,{to:"".concat(y,"/"),children:Object(v.jsx)(_.Logo,{})})}),Object(v.jsx)(x.b,{to:"".concat(y,"/profile/orders"),className:f.a.login,children:Object(v.jsxs)("h2",{className:f.a.login,children:[Object(v.jsx)(_.ProfileIcon,{type:"profile"===e?"primary":"secondary"}),Object(v.jsx)("span",{className:"profile"===e?a:s,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},S=n(23),E=n(7),R=n(39),T=n.n(R),w=n(2),C=n(46),I=n.n(C),k=n.p+"static/media/img.9eef3adb.png",U=n(217),D=n(5),P=n.n(D),q=n(10),A=function(){var e=Object(q.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/ingredients"));case 2:return t=e.sent,e.abrupt("return",Z(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(q.a)(P.a.mark((function e(t){var n,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("accessToken"),e.next=3,fetch("".concat(h,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",authorization:n},body:JSON.stringify({ingredients:t})});case 3:return c=e.sent,e.abrupt("return",Z(c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/auth/register"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",Z(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/auth/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",Z(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(q.a)(P.a.mark((function e(t){var n,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("refreshToken"),e.next=3,fetch("".concat(h,"/auth/logout"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})});case 3:return c=e.sent,e.abrupt("return",Z(c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/password-reset"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",Z(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/password-reset/reset"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.abrupt("return",Z(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/auth/user"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",authorization:t}});case 2:return n=e.sent,e.abrupt("return",Z(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(q.a)(P.a.mark((function e(t,n){var c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/auth/user"),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",authorization:n},body:JSON.stringify(t)});case 2:return c=e.sent,e.abrupt("return",Z(c));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(q.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("refreshToken")){e.next=3;break}return e.abrupt("return","");case 3:return e.next=5,fetch("".concat(h,"/auth/token"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})});case 5:return n=e.sent,e.abrupt("return",Z(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function M(e){return X.apply(this,arguments)}function X(){return(X=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.text();case 2:return n=e.sent,e.prev=3,e.abrupt("return",JSON.parse(n));case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",{message:n});case 10:case"end":return e.stop()}}),e,null,[[3,7]])})))).apply(this,arguments)}function Z(e){return V.apply(this,arguments)}function V(){return(V=Object(q.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if(n=e.sent,t.ok){e.next=5;break}throw new Error(n.message);case 5:return n.accessToken&&localStorage.setItem("accessToken",n.accessToken),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y="GET_INGREDIENTS_REQUEST",K="GET_INGREDIENTS_SUCCESS",$="GET_INGREDIENTS_ERROR",ee="ADD_CONSTRUCTOR_INGREDIENT",te="DELETE_CONSTRUCTOR_INGREDIENT",ne="CLEAR_CONSTRUCTOR",ce="CHANGE_INGREDIENTS_ORDER",re="SET_INGREDIENT_DETAILS",ae="DELETE_INGREDIENT_DETAILS",se="GET_ORDER_REQUEST",oe="GET_ORDER_SUCCESS",ie="GET_ORDER_ERROR",ue="CLEAR_ORDER";function de(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var le=function(e){var t=e.card,n=p(),r=Object(l.g)(),a=Object(l.h)(),s=Object(c.useState)(!1),o=Object(E.a)(s,2),i=o[0],u=o[1],d=Object(U.a)({type:"card",item:{card:Object(w.a)(Object(w.a)({},t),{},{guid:de()})},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),b=Object(E.a)(d,2),m=b[0].opacity,O=b[1],f=j((function(e){return e.reducer.constructorIngredients})),x=function(){var e,n=0,c=Object(S.a)(f.buns);try{for(c.s();!(e=c.n()).done;){e.value._id===t._id&&(n+=2)}}catch(s){c.e(s)}finally{c.f()}var r,a=Object(S.a)(f.toppings);try{for(a.s();!(r=a.n()).done;){r.value._id===t._id&&(n+=1)}}catch(s){a.e(s)}finally{a.f()}return n},h="mt-5 mr-5 mb-8 ".concat(I.a.card),g="mt-1 mr-5 ".concat(I.a.cost),y="mt-5 mr-5 text text_type_main-default ".concat(I.a.description);return Object(v.jsxs)("div",{className:h,ref:O,style:{opacity:m},onClick:function(){u(!i),n({type:re,card:t}),r.push("".concat("/yap_burger","/ingredients/").concat(t._id),{background:a})},children:[x()>0&&Object(v.jsx)(_.Counter,{count:x(),size:"default"}),Object(v.jsx)("div",{className:k,children:Object(v.jsx)("img",{className:I.a.image,alt:"\u0424\u043e\u0442\u043e \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",src:t.image})}),Object(v.jsxs)("div",{className:g,children:[Object(v.jsx)("p",{className:"pr-1 text text_type_digits-default",children:t.price}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(v.jsx)("p",{className:y,children:t.name})]})},je=function(){var e=j((function(e){return e.reducer.ingredients})),t=r.a.useState("\u0411\u0443\u043b\u043a\u0438"),n=Object(E.a)(t,2),a=n[0],s=n[1],o="mt-5 mr-5 ".concat(T.a.ingredients),i="mb-6 ".concat(T.a.title),u="ml-4 mb-8 ".concat(T.a.cards),d="custom-scroll mt-10 mb-10 ".concat(T.a.scrollCont),l=[],p=[],b=[];var m=Object(c.useRef)(null),O=Object(c.useRef)(null),f=Object(c.useRef)(null);return e&&function(e){var t,n=Object(S.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value;"bun"===c.type&&l.push(c),"sauce"===c.type&&p.push(c),"main"===c.type&&b.push(c)}}catch(r){n.e(r)}finally{n.f()}}(e),Object(v.jsxs)("div",{className:o,children:[Object(v.jsxs)("nav",{className:T.a.tabs,children:[Object(v.jsx)(_.Tab,{value:"\u0411\u0443\u043b\u043a\u0438",active:"\u0411\u0443\u043b\u043a\u0438"===a,onClick:s,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(v.jsx)(_.Tab,{value:"\u0421\u043e\u0443\u0441\u044b",active:"\u0421\u043e\u0443\u0441\u044b"===a,onClick:s,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(v.jsx)(_.Tab,{value:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",active:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"===a,onClick:s,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(v.jsxs)("div",{className:d,onScroll:function(e){var t=e.currentTarget.scrollTop,n=m.current.offsetTop/2,c=O.current.offsetTop/2,r=f.current.offsetTop/2;t>=n&&s("\u0411\u0443\u043b\u043a\u0438"),t>=c&&s("\u0421\u043e\u0443\u0441\u044b"),t>=r&&s("\u041d\u0430\u0447\u0438\u043d\u043a\u0438")},children:[Object(v.jsxs)("section",{ref:m,children:[Object(v.jsx)("h2",{className:i,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(v.jsx)("div",{className:u,children:l.map((function(e){return Object(v.jsx)(le,{card:e},e._id)}))})]}),Object(v.jsxs)("section",{ref:O,children:[Object(v.jsx)("h2",{className:i,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(v.jsx)("div",{className:u,children:p.map((function(e){return Object(v.jsx)(le,{card:e},e._id)}))})]}),Object(v.jsxs)("section",{ref:f,children:[Object(v.jsx)("h2",{className:i,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(v.jsx)("div",{className:u,children:b.map((function(e){return Object(v.jsx)(le,{card:e},e._id)}))})]})]})]})},pe=n(26),be=n.n(pe),me=n(108),Oe=n.n(me),fe=n(218),_e=function(e){var t=e.card,n=e.moveCard,r=e.type,a=e.index,s=p(),o=Object(c.useRef)(null),i=j((function(e){return e.reducer.constructorIngredients})),u="mr-1 ".concat(Oe.a.listItem),d=Object(U.a)({type:"card",item:t,collect:function(e){return{isDragging:e.isDragging()}}}),l=Object(E.a)(d,2)[1],b=Object(fe.a)({accept:"card",hover:function(e){var t=i.toppings.findIndex((function(t){return t._id===e._id}));-1!==t&&n&&n(t,a)},collect:function(e){return{opacity:e.isOver()?.2:1}}}),m=Object(E.a)(b,2),O=m[0].opacity;return l((0,m[1])(o)),"top"===r?Object(v.jsx)(_.ConstructorElement,{type:"top",isLocked:!0,text:t.name+" (\u0432\u0435\u0440\u0445)",price:t.price,thumbnail:t.image}):"bottom"===r?Object(v.jsx)(_.ConstructorElement,{type:"bottom",isLocked:!0,text:t.name+" (\u043d\u0438\u0437)",price:t.price,thumbnail:t.image}):Object(v.jsxs)("div",{ref:o,style:{opacity:O},className:u,children:[Object(v.jsx)(_.DragIcon,{type:"primary"}),Object(v.jsx)(_.ConstructorElement,{handleClose:function(){var e;e=t.guid,s({type:te,guid:e})},text:t.name,price:t.price,thumbnail:t.image})]})},xe=n(35),he=n.n(xe),ge=n.p+"static/media/done.cc5a59a7.gif",ve=function(){var e=j((function(e){return e.reducer.order})),t="text text_type_digits-large pb-6 ".concat(he.a.id),n="text text_type_main-medium pb-15 ".concat(he.a.idText," ").concat(he.a.light),c="pb-15 ".concat(he.a.image),r="pb-2  text text_type_main-default ".concat(he.a.light),a="text text_type_main-default ".concat(he.a.navy);return Object(v.jsxs)(v.Fragment,{children:[e.order&&Object(v.jsx)("p",{className:t,children:e.order.number}),Object(v.jsx)("p",{className:n,children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(v.jsx)("img",{className:c,alt:"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",src:ge}),e.name&&Object(v.jsxs)("p",{className:r,children:['\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 "',e.name,'" \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c']}),Object(v.jsx)("p",{className:a,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},ye=n(55),Ne=n.n(ye),Se=n(109),Ee=n.n(Se),Re=function(e){var t=e.children,n=e.close;return Object(v.jsx)("div",{className:Ee.a.modalOverlay,onClick:function(e){e.stopPropagation(),e.target===e.currentTarget&&n()},children:t})},Te=function(e){var t=e.children,n=e.close,r=e.title,s=document.getElementById("react-modals"),o="mt-15 mr-10 ".concat(Ne.a.closeIcon),i="pt-30 pb-30 pl-25 pr-25 ".concat(Ne.a.orderDetails),u=" ml-10 mt-15 text text_type_main-large ".concat(Ne.a.title),d=function(e){"Escape"===e.key&&n()};return Object(c.useEffect)((function(){return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}}),[]),Object(a.createPortal)(Object(v.jsx)(Re,{close:n,children:Object(v.jsxs)("div",{className:i,children:[r&&Object(v.jsx)("h3",{className:u,children:r}),Object(v.jsx)("div",{className:o,onClick:n,children:Object(v.jsx)(_.CloseIcon,{type:"primary"})}),t]})}),s)},we=function(){var e=p(),t=j((function(e){return e.userReducer.user})),n=j((function(e){return e.reducer.constructorIngredients})),a=r.a.useState(0),s=Object(E.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(!1),d=Object(E.a)(u,2),l=d[0],b=d[1],m="mt-5 ml-5 ".concat(be.a.constructor),O="mt-10 ".concat(be.a.list),f="".concat(be.a.top),h="custom-scroll  ".concat(be.a.center),g="".concat(be.a.bottom),y="mt-10 ".concat(be.a.total),N="mr-2 text text_type_digits-medium ".concat(be.a.totalCount),R="mr-10 ".concat(be.a.totalCont),T="text text_type_main-default pl-2 ".concat(be.a.link);function C(t){b(!l),t.preventDefault();var c,r=[],a=Object(S.a)(n.buns);try{for(a.s();!(c=a.n()).done;){var s=c.value;r.push(s._id)}}catch(d){a.e(d)}finally{a.f()}var o,i=Object(S.a)(n.toppings);try{for(i.s();!(o=i.n()).done;){var u=o.value;r.push(u._id)}}catch(d){i.e(d)}finally{i.f()}e(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:se}),L(e).then((function(e){n(e?{type:oe,order:e}:{type:ie})})).catch((function(e){console.log(e),n({type:ie})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(r))}Object(c.useEffect)((function(){var e=function(e){var t,n=0,c=Object(S.a)(e.buns);try{for(c.s();!(t=c.n()).done;)n+=2*t.value.price}catch(s){c.e(s)}finally{c.f()}var r,a=Object(S.a)(e.toppings);try{for(a.s();!(r=a.n()).done;)n+=r.value.price}catch(s){a.e(s)}finally{a.f()}return n}(n);i(e)}),[n]);var I=Object(fe.a)({accept:"card",drop:function(t){e(Object(w.a)({type:ee},t))}}),k=Object(E.a)(I,2)[1],U=Object(c.useCallback)((function(t,c){e({type:ce,item:n.toppings,dragIndex:t,hoverIndex:c})}),[n.toppings,e]);return Object(v.jsxs)("div",{className:m,ref:k,children:[0===o&&Object(v.jsx)("div",{className:be.a.info,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0438, \u043d\u0430\u0447\u0438\u043d\u043a\u0438 \u0438 \u0441\u043e\u0443\u0441\u044b \u0432 \u043b\u0435\u0432\u043e\u0439 \u0447\u0430\u0441\u0442\u0438, \u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430"}),0!==o&&Object(v.jsxs)("section",{className:O,children:[Object(v.jsx)("div",{className:f,children:n.buns[0]&&n.buns.map((function(e,t){return Object(v.jsx)(_e,{index:t,card:e,type:"top"},e.guid)}))}),Object(v.jsx)("div",{className:h,children:n.toppings&&n.toppings.map((function(e,t){return Object(v.jsx)(_e,{card:e,type:"topping",index:t,moveCard:U},e.guid)}))}),Object(v.jsx)("div",{className:g,children:n.buns[0]&&n.buns.map((function(e,t){return Object(v.jsx)(_e,{card:e,index:t,type:"bottom"},e.guid+"b")}))})]}),0!==o&&Object(v.jsxs)("div",{className:y,children:[Object(v.jsxs)("div",{className:R,children:[Object(v.jsx)("p",{className:N,children:o}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]}),""!==t.email?Object(v.jsx)(_.Button,{type:"primary",size:"large",onClick:function(e){return C(e)},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}):Object(v.jsx)(x.b,{to:"".concat("/yap_burger","/login"),className:T,children:Object(v.jsx)(_.Button,{type:"primary",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c"})}),l&&Object(v.jsx)(Te,{close:function(){b(!1),e({type:ne}),e({type:ue})},children:Object(v.jsx)(ve,{})})]})]})},Ce=n(56),Ie=n.n(Ce),ke=function(){return Object(v.jsx)("div",{className:Ie.a.wrapper,children:Object(v.jsx)("div",{className:Ie.a.container,children:Object(v.jsxs)("div",{className:Ie.a.content,children:[Object(v.jsx)("h1",{className:"mt-10 pt-10 text text_type_main-large",children:"Oops! 404 Error"}),Object(v.jsx)("p",{children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}),Object(v.jsx)("br",{}),Object(v.jsx)(x.b,{to:"".concat("/yap_burger","/"),className:"mt-10 text text_type_main-medium",children:"\u0412\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})})})},Ue=n(21),De=n(11),Pe=n.n(De),qe="REGISTER_USER_REQUEST",Ae="REGISTER_USER_REQUEST_SUCCESS",Le="REGISTER_USER_REQUEST_FAILED",Ge="LOGIN_REQUEST",Fe="LOGIN_REQUEST_SUCCESS",Qe="LOGIN_REQUEST_FAILED",Be="SET_IS_AUTH",We="RESET_IS_AUTH",Je="SET_USER",He="RESET_USER",ze="FORGOT_PASSWORD_REQUEST",Me="FORGOT_PASSWORD_REQUEST_SUCCESS",Xe="FORGOT_PASSWORD_REQUEST_FAILED",Ze="RESET_PASSWORD_REQUEST",Ve="RESET_PASSWORD_REQUEST_SUCCESS",Ye="RESET_PASSWORD_REQUEST_FAILED",Ke="GET_USER_REQUEST",$e="GET_USER_REQUEST_SUCCESS",et="GET_USER_REQUEST_FAILED",tt="LOGOUT_REQUEST",nt="LOGOUT_REQUEST_SUCCESS",ct="LOGOUT_REQUEST_FAILED",rt=function(){return function(){var e=Object(q.a)(P.a.mark((function e(t){var n,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:Ke}),e.next=4,z();case 4:return n=e.sent,e.next=7,J(n.accessToken);case 7:c=e.sent,t({type:$e}),t({type:Je,user:c}),t({type:Be,refreshToken:n.refreshToken}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t({type:et}),t({type:We});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},at=g,st=function(){var e,t,n=p(),r=Object(l.g)(),a=j((function(e){return e.userReducer.user})),s=Object(c.useState)({email:"",password:"",name:""}),o=Object(E.a)(s,2),i=o[0],u=o[1],d=j((function(e){return e.userReducer.loginUserSuccess}));var b=null===(e=r.location)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.from;Object(c.useEffect)((function(){d&&r.replace(b)}),[d]);var m=function(e){u(Object(w.a)(Object(w.a)({},i),{},Object(Ue.a)({},e.target.name,e.target.value)))},O="mt-10 text text_type_main-default pl-2 ".concat(Pe.a.link);return""!==a.email&&b?Object(v.jsx)(l.a,{to:b}):""!==a.email?Object(v.jsx)(l.a,{to:{pathname:"".concat(at,"/")}}):Object(v.jsxs)("div",{className:Pe.a.page,children:[Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:Ge}),F(e).then((function(e){e?(n({type:Fe}),n({type:Be,refreshToken:e.refreshToken}),n({type:Je,user:e.user})):n({type:Qe})})).catch((function(e){console.log(e),n({type:Qe})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i))},children:[Object(v.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(v.jsx)(_.Input,{placeholder:"Email",value:i.email,name:"email",onChange:m}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.PasswordInput,{value:i.password,name:"password",onChange:m}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Button,{type:"primary",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(v.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-10 pt-10  mb-4",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",Object(v.jsx)(x.b,{to:"".concat(at,"/register"),className:O,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(v.jsxs)("p",{className:"text text_type_main-default text_color_inactive  mb-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(v.jsx)(x.b,{to:"".concat(at,"/forgot-password"),className:O,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},ot=g,it=function(){var e=p(),t=j((function(e){return e.userReducer.user})),n=Object(c.useState)({name:"",email:"",password:""}),r=Object(E.a)(n,2),a=r[0],s=r[1],o=j((function(e){return e.userReducer.registerUserSuccess}));var i=function(e){s(Object(w.a)(Object(w.a)({},a),{},Object(Ue.a)({},e.target.name,e.target.value)))},u="mt-10 text text_type_main-default pl-2 ".concat(Pe.a.link);return""!==t.email||o?Object(v.jsx)(l.a,{to:{pathname:"".concat(ot,"/")}}):Object(v.jsxs)("div",{className:Pe.a.page,children:[Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:qe}),G(e).then((function(e){n(e?{type:Ae}:{type:Le})})).catch((function(e){console.log(e),n({type:Le})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a))},children:[Object(v.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(v.jsx)(_.Input,{placeholder:"\u0418\u043c\u044f",value:a.name,name:"name",onChange:i}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Input,{placeholder:"Email",value:a.email,name:"email",onChange:i}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.PasswordInput,{value:a.password,name:"password",onChange:i}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Button,{type:"primary",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(v.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-10 pt-10  mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(v.jsx)(x.b,{to:"".concat(ot,"/login"),className:u,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},ut=n(31),dt=n.n(ut),lt=function(){var e=Object(l.i)().id,t=Object(c.useState)(),n=Object(E.a)(t,2),r=n[0],a=n[1],s=j((function(e){return e.reducer.ingredients})),o=j((function(e){return e.reducer.ingredientDetails}));Object(c.useEffect)((function(){var t=e?null===s||void 0===s?void 0:s.find((function(t){return t._id===e})):o;a(null===t?{}:t)}),[s]);var i="pt-4 pb-8 ".concat(dt.a.image),u="text text_type_main-medium pb-8 ".concat(dt.a.idText," ").concat(dt.a.light),d="".concat(dt.a.details),p="text text_type_main-default ".concat(dt.a.navy),b="pr-8 text text_type_main-default ".concat(dt.a.navy),m="pt-1  text text_type_digits-default ".concat(dt.a.navy);return void 0===r?null:Object(v.jsxs)("div",{className:dt.a.detailsCard,children:[Object(v.jsx)("img",{className:i,alt:"\u0417\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442",src:r.image}),Object(v.jsx)("p",{className:u,children:r.name}),Object(v.jsxs)("div",{className:d,children:[Object(v.jsxs)("div",{className:p,children:[Object(v.jsx)("p",{className:b,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(v.jsx)("p",{className:m,children:r.calories})]}),Object(v.jsxs)("div",{className:p,children:[Object(v.jsx)("p",{className:b,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(v.jsx)("p",{className:m,children:r.proteins})]}),Object(v.jsxs)("div",{className:p,children:[Object(v.jsx)("p",{className:b,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(v.jsx)("p",{className:m,children:r.fat})]}),Object(v.jsxs)("div",{className:p,children:[Object(v.jsx)("p",{className:b,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(v.jsx)("p",{className:m,children:r.carbohydrates})]})]})]})},jt=function(){return Object(v.jsxs)("div",{className:Pe.a.ingredient,children:[Object(v.jsx)("span",{className:"text text_type_main-large mt-10 mr-10 ml-10",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(v.jsx)(lt,{})]})},pt=g,bt=function(){var e=p(),t=j((function(e){return e.userReducer.user})),n=j((function(e){return e.userReducer.forgotPasswordSuccess})),r=Object(c.useState)({email:"",name:""}),a=Object(E.a)(r,2),s=a[0],o=a[1];var i="mt-10 text text_type_main-default pl-2 ".concat(Pe.a.link);return""!==t.email?Object(v.jsx)(l.a,{to:{pathname:"".concat(pt,"/")}}):n?Object(v.jsx)(l.a,{to:{pathname:"".concat(pt,"/reset-password")}}):Object(v.jsxs)("div",{className:Pe.a.page,children:[Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:ze}),B(e).then((function(e){n(e?{type:Me}:{type:Xe})})).catch((function(e){n({type:Xe})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(s))},children:[Object(v.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(v.jsx)(_.Input,{placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:s.email,name:"email",onChange:function(e){o(Object(w.a)(Object(w.a)({},s),{},Object(Ue.a)({},e.target.name,e.target.value)))}}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Button,{type:"primary",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(v.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-10 pt-10  mb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(v.jsx)(x.b,{to:"".concat(pt,"/login"),className:i,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},mt=g,Ot=function(){var e=p(),t=j((function(e){return e.userReducer.user})),n=Object(c.useState)({password:"",token:"",name:"",email:""}),r=Object(E.a)(n,2),a=r[0],s=r[1],o=j((function(e){return e.userReducer.forgotPasswordSuccess})),i=j((function(e){return e.userReducer.resetPasswordSuccess})),u=function(e){s(Object(w.a)(Object(w.a)({},a),{},Object(Ue.a)({},e.target.name,e.target.value)))};var d="mt-10 text text_type_main-default pl-2 ".concat(Pe.a.link);return""!==t.email||i?Object(v.jsx)(l.a,{to:{pathname:"".concat(mt,"/")}}):o?Object(v.jsxs)("div",{className:Pe.a.page,children:[Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:Ze}),W(e).then((function(e){n(e?{type:Ve}:{type:Ye})})).catch((function(e){n({type:Ye})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(a))},children:[Object(v.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(v.jsx)(_.PasswordInput,{value:a.password,name:"password",onChange:u}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Input,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:a.token,name:"token",onChange:u}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Button,{type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(v.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-10 pt-10  mb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",Object(v.jsx)(x.b,{to:"".concat(mt,"/login"),className:d,children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(v.jsx)(l.a,{to:{pathname:"".concat(mt,"/login")}})},ft=n(14),_t=n(110),xt=n.n(_t),ht="WS_START",gt="WS_PRIVAT_START",vt="WS_GET_MESSAGE",yt="WS_CONNECTION_CLOSE",Nt=n(19),St=n.n(Nt),Et=n(78),Rt=n.n(Et),Tt=(n(208),function(e){var t,n=e?e.createdAt:0;return(t=Rt()(new Date(n))).locale("ru"),"".concat(t.calendar()," i-GMT+3")}),wt=function(e){var t,n=e.order,r=Object(l.g)(),a=Object(l.h)(),s=Object(c.useState)(!1),o=Object(E.a)(s,2),i=o[0],u=o[1],d=j((function(e){return e.reducer.ingredients})),p=null===n||void 0===n||null===(t=n.ingredients)||void 0===t?void 0:t.reduce((function(e,t){var n=null===d||void 0===d?void 0:d.find((function(e){return t===e._id}));return n?"bun"===n.type?e+2*n.price:e+n.price:0}),0),b="done"===n.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"pending"===n.status?"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f":"\u0421\u043e\u0437\u0434\u0430\u043d",m=Tt(n),O="".concat(St.a.cont," p-6 mr-2 mb-4"),f="".concat(St.a.number," text text_type_main-small"),x="".concat(St.a.date," text text_type_main-small text_color_inactive"),h="".concat(St.a.name," text text_type_main-default mt-6"),g="".concat(St.a.totalCost," text text_type_digits-default"),y="".concat(St.a.items," mt-6"),N=n.status,S="text text_type_main-small ".concat(St.a[N]),R="text text_type_digits-default ".concat(St.a.count);return Object(v.jsxs)("div",{className:O,onClick:function(){u(!i),r.push("".concat(a.pathname,"/").concat(n.number),{background:a})},children:[Object(v.jsxs)("div",{className:St.a.top,children:[Object(v.jsxs)("span",{className:f,children:["#",n.number]}),Object(v.jsx)("span",{className:x,children:m})]}),Object(v.jsx)("div",{className:h,children:n.name}),Object(v.jsx)("div",{className:S,children:b}),Object(v.jsxs)("div",{className:y,children:[Object(v.jsx)("div",{className:St.a.images,children:function(e){var t=new Set(e);return Object(ft.a)(t)}(null===n||void 0===n?void 0:n.ingredients).filter((function(e,t){return t<6})).map((function(e,t){var c,r=null===d||void 0===d?void 0:d.find((function(t){return t._id===e})),a=(null===n||void 0===n?void 0:n.ingredients)?(null===n||void 0===n||null===(c=n.ingredients)||void 0===c?void 0:c.length)-6:0;return Object(v.jsxs)("div",{className:St.a.imageBorder,children:[Object(v.jsx)("img",{className:St.a.image,src:null===r||void 0===r?void 0:r.image,alt:"ingredient_picture"},t),5===t&&Object(v.jsxs)("span",{className:R,children:["+",a]})]},t)}))}),Object(v.jsxs)("div",{className:g,children:[Object(v.jsx)("span",{className:"mr-1",children:p}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},Ct=function(){var e=j((function(e){return e.wsReduser.orders}))||[],t=p(),n="custom-scroll  ".concat(xt.a.cont);return Object(c.useEffect)((function(){return t({type:gt,payload:""}),function(){t({type:yt,payload:""})}}),[]),"undefined"!==typeof e&&e.length?Object(v.jsx)("div",{className:n,children:Object(ft.a)(e).reverse().map((function(e,t){return Object(v.jsx)(wt,{order:e},t)}))}):(t({type:gt,payload:""}),null)},It=g,kt=function(){var e=j((function(e){return e.userReducer.user})),t=Object(l.h)(),n=Object(c.useState)(!1),r=Object(E.a)(n,2),a=r[0],s=r[1],o=p(),i=Object(c.useState)(Object(w.a)(Object(w.a)({},e),{},{password:"12345678"})),u=Object(E.a)(i,2),d=u[0],b=u[1],m=Object(c.useState)([]),O=Object(E.a)(m,2),f=O[0],h=O[1];Object(c.useEffect)((function(){o(rt())}),[]);var g=""!==e.email&&t.pathname==="".concat(It,"/profile/orders");function y(e){s(!0),f.includes(e.target.name)||h([].concat(Object(ft.a)(f),[e.target.name])),b(Object(w.a)(Object(w.a)({},d),{},Object(Ue.a)({},e.target.name,e.target.value)))}Object(c.useEffect)((function(){b(Object(w.a)(Object(w.a)({},e),{},{password:"12345678"}))}),[e]);var N="".concat(Pe.a.profileLink," text text_type_main-medium text_color_inactive pl-2"),S="".concat(Pe.a.profileLink," mt-10 text text_type_main-medium text_color_primary pl-2");return""===e.email?Object(v.jsx)(l.a,{to:{pathname:"".concat(It,"/login")}}):Object(v.jsxs)("div",{className:Pe.a.profilePage,children:[Object(v.jsxs)("nav",{className:Pe.a.nav,children:[Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(x.b,{to:"".concat(It,"/profile"),className:g?N:S,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(v.jsx)("li",{children:Object(v.jsx)(x.b,{to:"".concat(It,"/profile/orders"),className:g?S:N,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(v.jsx)("li",{children:Object(v.jsx)(x.b,{to:"".concat(It,"/login"),onClick:function(){return o(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:tt}),n({type:He}),n({type:We}),Q(e).then((function(e){n(e?{type:nt}:{type:ct})})).catch((function(e){console.log(e),n({type:ct})}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},className:N,children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(v.jsx)("p",{className:"text text_type_main-default text_color_inactive mt-10 pt-10",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),g?Object(v.jsx)(Ct,{}):Object(v.jsxs)("form",{className:"form",onFocus:function(e){e.preventDefault(),"password"===e.target.name&&b(Object(w.a)(Object(w.a)({},d),{},{password:""}))},onSubmit:function(e){e.preventDefault();var t={};f.forEach((function(e){return t[e]=d[e]})),h([]),s(!1),o(function(e){return function(){var t=Object(q.a)(P.a.mark((function t(n){var c,r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Ke}),t.next=4,z();case 4:return c=t.sent,t.next=7,H(e,c.accessToken);case 7:r=t.sent,n({type:$e}),n({type:Je,user:r}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),n({type:et}),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:[Object(v.jsx)(_.Input,{placeholder:"\u0418\u043c\u044f",value:d.name,name:"name",onChange:y,icon:"EditIcon"}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Input,{placeholder:"Email",value:d.email,name:"email",onChange:y,icon:"EditIcon"}),Object(v.jsx)("div",{className:"mb-6"}),Object(v.jsx)(_.Input,{placeholder:"Password",value:d.password,name:"password",onChange:y,icon:"EditIcon",type:"password"}),a&&Object(v.jsxs)("div",{className:"mt-10",children:[Object(v.jsx)(_.Button,{type:"secondary",onClick:function(t){t.preventDefault(),b(Object(w.a)(Object(w.a)({},e),{},{password:"12345678"})),s(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(v.jsx)(_.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})},Ut=n(113),Dt=function(e){var t=e.children,n=Object(Ut.a)(e,["children"]),c=j((function(e){return e.userReducer.user}));return Object(v.jsx)(l.b,Object(w.a)(Object(w.a)({},n),{},{render:function(e){var n=e.location;return""!==c.email?t:Object(v.jsx)(l.a,{to:{pathname:"".concat("/yap_burger","/login"),state:{from:n}}})}}))},Pt=n(20),qt=n.n(Pt),At=function(){Object(l.g)(),Object(l.h)();var e,t=Object(c.useState)(!1),n=Object(E.a)(t,2),r=(n[0],n[1],j((function(e){return e.wsReduser.orders}))||[]),a=j((function(e){return e.reducer.ingredients})),s=Object(l.i)().id,o=Number(s),i=r.find((function(e){return e.number===o})),u=Tt(i),d=null===i||void 0===i||null===(e=i.ingredients)||void 0===e?void 0:e.reduce((function(e,t){var n=null===a||void 0===a?void 0:a.find((function(e){return t===e._id}));return n?"bun"===n.type?e+2*n.price:e+n.price:0}),0),p=null===i||void 0===i?void 0:i.ingredients,b=function(){var e=[];if(!p)return[];var t,n=Object(S.a)(p);try{var c=function(){var n=t.value;e.push(null===a||void 0===a?void 0:a.find((function(e){return e._id===n})))};for(n.s();!(t=n.n()).done;)c()}catch(r){n.e(r)}finally{n.f()}return e}();var m=b.filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return[e,b.filter((function(t){return t===e})).length]})),O="done"===(null===i||void 0===i?void 0:i.status)?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"pending"===(null===i||void 0===i?void 0:i.status)?"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f":"\u0421\u043e\u0437\u0434\u0430\u043d",f=null===i||void 0===i?void 0:i.status,x="".concat(qt.a.cont," mt-15 mb-15 pl-10 mr-10"),h="".concat(qt.a.number,"  mb-10 text text_type_digits-default"),g="".concat(qt.a.total," text text_type_digits-default"),y="".concat(qt.a.ingredCont," mt-15"),N="text text_type_main-small ".concat(qt.a[f]),R="custom-scroll mt-10 mb-10  ".concat(qt.a.scrollCont),T="mb-3 text text_type_main-medium ".concat(qt.a.name),w="".concat(qt.a.footer," mt-10"),C="".concat(qt.a.sum," text text_type_digits-default pr-1");return Object(v.jsxs)("div",{className:x,children:[Object(v.jsxs)("h3",{className:h,children:["#",o]}),Object(v.jsx)("div",{className:T,children:null===i||void 0===i?void 0:i.name}),Object(v.jsx)("div",{className:N,children:O}),Object(v.jsxs)("div",{className:y,children:[Object(v.jsx)("div",{className:"mb-6 text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(v.jsx)("div",{className:R,children:Object(v.jsx)("div",{className:"mb-10 pr-6 ".concat(qt.a.ingredients),children:m.map((function(e,t){var n,c,r,a,s;return Object(v.jsxs)("div",{className:qt.a.ingredient,children:[Object(v.jsx)("div",{className:qt.a.image,style:{backgroundImage:"url("+(null===(n=e[0])||void 0===n?void 0:n.image_mobile)+")",backgroundPosition:"center"}}),Object(v.jsx)("p",{className:"text text_type_main-default pr-5",children:null===(c=e[0])||void 0===c?void 0:c.name}),Object(v.jsx)("p",{className:C,children:"bun"===(null===(r=e[0])||void 0===r?void 0:r.type)?"2 x ".concat(null===(a=e[0])||void 0===a?void 0:a.price):"".concat(e[1]," x ").concat(null===(s=e[0])||void 0===s?void 0:s.price)}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]},t)}))})})]}),Object(v.jsxs)("div",{className:w,children:[Object(v.jsx)("div",{className:"text text_type_main-default text_color_inactive",children:u}),Object(v.jsxs)("div",{className:g,children:[Object(v.jsx)("span",{className:"mr-2",children:d}),Object(v.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})},Lt=n(27),Gt=n.n(Lt),Ft=function(){var e=j((function(e){return e.wsReduser.orders}))||[],t=j((function(e){return e.wsReduser.total}))||0,n=j((function(e){return e.wsReduser.totalToday}))||0,r=p(),a="custom-scroll  ".concat(Gt.a.cont),s="custom-scroll ml-10 pl-10 ".concat(Gt.a.right),o="".concat(Gt.a.ordersCont," mb-15"),i="".concat(Gt.a.ordersList," mr-6"),u="".concat(Gt.a.ordersWidth," mr-6"),d="".concat(Gt.a.order," text text_type_digits-default mr-9"),l="".concat(Gt.a.total," text text_type_digits-large");return Object(c.useEffect)((function(){return r({type:ht,payload:""}),function(){r({type:yt,payload:""})}}),[]),Object(v.jsxs)("div",{className:Gt.a.feed,children:[Object(v.jsx)("h1",{className:"text text_type_main-large pt-8 mb-4",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(v.jsxs)("div",{className:Gt.a.feedCont,children:[Object(v.jsx)("section",{className:Gt.a.left,children:Object(v.jsx)("div",{className:a,children:Object(ft.a)(e).reverse().map((function(e,t){return Object(v.jsx)(wt,{order:e},t)}))})}),Object(v.jsxs)("section",{className:s,children:[Object(v.jsxs)("div",{className:o,children:[Object(v.jsxs)("div",{className:u,children:[Object(v.jsx)("div",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(v.jsx)("ul",{className:i,children:e.filter((function(e){return"done"===e.status})).map((function(e,t){return Object(v.jsx)("li",{className:d,children:e.number},t)}))})]}),Object(v.jsxs)("div",{className:u,children:[Object(v.jsx)("div",{className:"text text_type_main-medium  mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(v.jsx)("ul",{className:i,children:e.filter((function(e){return"pending"===e.status})).map((function(e,t){return Object(v.jsx)("li",{className:"text text_type_digits-default",children:e.number},t)}))})]})]}),Object(v.jsxs)("div",{className:"text text_type_main-medium mb-15",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:",Object(v.jsx)("div",{className:l,children:t})]}),Object(v.jsxs)("div",{className:"text text_type_main-medium mb-10",children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",Object(v.jsx)("div",{className:l,children:n})]})]})]})]})},Qt=function(){var e=p();return Object(c.useEffect)((function(){return e({type:ht,payload:""}),function(){e({type:yt,payload:""})}}),[]),Object(v.jsx)("div",{className:Pe.a.ingredient,children:Object(v.jsx)(At,{})})},Bt=function(){var e=p();return Object(c.useEffect)((function(){return e({type:gt,payload:""}),function(){e({type:yt,payload:""})}}),[]),Object(v.jsx)("div",{className:Pe.a.ingredient,children:Object(v.jsx)(At,{})})},Wt=g,Jt=function(){var e=p(),t=Object(l.h)(),n=Object(l.g)(),r=t.state,a=r&&r.background,s=localStorage.getItem("refreshToken");Object(c.useEffect)((function(){e(function(){var e=Object(q.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Y}),A().then((function(e){t(e?{type:K,ingredients:e}:{type:$})})).catch((function(e){console.log(e),t({type:$})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(c.useEffect)((function(){e(rt())}),[s]);var o=function(){e({type:ae}),n.goBack()},i="text text_type_main-large pt-4 ".concat(m.a.title);return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(N,{}),Object(v.jsxs)(l.d,{location:a||t,children:[Object(v.jsx)(l.b,{path:"".concat(Wt,"/"),exact:!0,children:Object(v.jsxs)("div",{className:m.a.content,children:[Object(v.jsx)("h1",{className:i,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(v.jsxs)(u.a,{backend:d.a,children:[Object(v.jsx)(je,{}),Object(v.jsx)(we,{})]})]})}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/login"),component:st,exact:!0}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/register"),component:it,exact:!0}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/forgot-password"),component:bt,exact:!0}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/reset-password"),component:Ot}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/feed/:id"),component:Qt}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/feed"),children:Object(v.jsx)(Ft,{})}),Object(v.jsx)(Dt,{path:"".concat(Wt,"/profile/orders/:id"),children:Object(v.jsx)(Bt,{})}),Object(v.jsx)(Dt,{path:"".concat(Wt,"/profile/orders"),children:Object(v.jsx)(kt,{})}),Object(v.jsx)(Dt,{path:"".concat(Wt,"/profile"),children:Object(v.jsx)(kt,{})}),Object(v.jsx)(l.b,{path:"".concat(Wt,"/ingredients/:id"),component:jt}),Object(v.jsx)(l.b,{component:ke})]}),a&&Object(v.jsx)(l.b,{path:"".concat(Wt,"/ingredients/:id"),children:Object(v.jsx)(Te,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",close:o,children:Object(v.jsx)(lt,{})})}),a&&Object(v.jsx)(Dt,{path:"".concat(Wt,"/profile/orders/:id"),children:Object(v.jsx)(Te,{title:"",close:o,children:Object(v.jsx)(At,{})})}),a&&Object(v.jsx)(l.b,{path:"".concat(Wt,"/feed/:id"),children:Object(v.jsx)(Te,{title:"",close:o,children:Object(v.jsx)(At,{})})})]})},Ht=n(30),zt=n(111),Mt=n(83),Xt=n.n(Mt),Zt={ingredients:[],ingredientsRequest:!1,ingredientsError:!1,order:{},orderRequest:!1,orderError:!1,constructorIngredients:{buns:[],toppings:[]},ingredientDetails:{},ingredientsFailed:!1,orderFailed:!1},Vt={registerUserRequest:!1,registerUserRequestFailed:!1,registerUserSuccess:!1,loginUserSuccess:!1,user:{email:"",name:""},token:"",forgotPasswordSuccess:!1,forgotPasswordRequest:!1,forgotPasswordRequestFailed:!0,resetPasswordSuccess:!1,resetPasswordRequest:!1,resetPasswordRequestFailed:!0,isAuth:!1,loginRequest:!1,loginRequestFailed:!1,getUserRequest:!1,getUserRequestFailed:!1,isUserLoaded:!1,refreshToken:void 0,accessToken:void 0},Yt={wsConnected:!1,orders:[],total:0,totalToday:0},Kt=Object(Ht.b)({reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(w.a)(Object(w.a)({},e),{},{ingredientsRequest:!0});case K:return Object(w.a)(Object(w.a)({},e),{},{ingredientsFailed:!1,ingredientsRequest:!1,ingredients:t.ingredients.data});case $:return Object(w.a)(Object(w.a)(Object(w.a)({},e),Zt),{},{ingredientsError:!0});case se:return Object(w.a)(Object(w.a)({},e),{},{orderRequest:!0});case oe:return Object(w.a)(Object(w.a)({},e),{},{orderFailed:!1,orderRequest:!1,order:t.order});case ie:return Object(w.a)(Object(w.a)(Object(w.a)({},e),Zt),{},{orderError:!0});case ue:return Object(w.a)(Object(w.a)({},e),{},{order:{}});case ee:return Object(w.a)(Object(w.a)({},e),{},{constructorIngredients:"bun"===t.card.type?{buns:[t.card],toppings:Object(ft.a)(e.constructorIngredients.toppings)}:{buns:Object(ft.a)(e.constructorIngredients.buns),toppings:[].concat(Object(ft.a)(e.constructorIngredients.toppings),[t.card])}});case te:return Object(w.a)(Object(w.a)({},e),{},{constructorIngredients:{buns:Object(ft.a)(e.constructorIngredients.buns),toppings:Object(ft.a)(e.constructorIngredients.toppings.filter((function(e,n){return e.guid!==t.guid})))}});case ne:return Object(w.a)(Object(w.a)({},e),{},{constructorIngredients:{buns:[],toppings:[]}});case re:return Object(w.a)(Object(w.a)({},e),{},{ingredientDetails:t.card});case ae:return Object(w.a)(Object(w.a)({},e),{},{ingredientDetails:{}});case ce:var n=Xt()(e.constructorIngredients.toppings,{$splice:[[t.dragIndex,1]]}),c=Xt()(n,{$splice:[[t.hoverIndex,0,e.constructorIngredients.toppings[t.dragIndex]]]});return Object(w.a)(Object(w.a)({},e),{},{constructorIngredients:Object(w.a)(Object(w.a)({},e.constructorIngredients),{},{toppings:c})});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return Object(w.a)(Object(w.a)({},e),{},{registerUserRequest:!0});case Ae:return Object(w.a)(Object(w.a)({},e),{},{registerUserSuccess:!0,registerUserRequest:!1,registerUserRequestFailed:!1});case Le:return Object(w.a)(Object(w.a)({},e),{},{registerUserRequest:!1,registerUserRequestFailed:!0,registerUserSuccess:!1});case Be:return localStorage.setItem("refreshToken",t.refreshToken),Object(w.a)(Object(w.a)({},e),{},{isAuth:!0});case We:return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),Object(w.a)(Object(w.a)({},e),{},{isAuth:!1});case Ge:return Object(w.a)(Object(w.a)({},e),{},{loginRequest:!0,loginUserSuccess:!1,loginRequestFailed:!1});case Fe:return Object(w.a)(Object(w.a)({},e),{},{loginRequest:!1,loginRequestFailed:!1,loginUserSuccess:!0});case Qe:return Object(w.a)(Object(w.a)({},e),{},{loginRequest:!1,loginRequestFailed:!0,loginUserSuccess:!1});case tt:case nt:return Object(w.a)(Object(w.a)({},e),{},{loginUserSuccess:!1});case Je:return Object(w.a)(Object(w.a)({},e),t.user);case He:return Object(w.a)(Object(w.a)({},e),{},{user:{email:"",name:""}});case Ke:return Object(w.a)(Object(w.a)({},e),{},{getUserRequest:!0});case $e:return Object(w.a)(Object(w.a)({},e),{},{getUserRequest:!1,getUserRequestFailed:!1,isUserLoaded:!0});case et:return Object(w.a)(Object(w.a)({},e),{},{getUserRequest:!1,getUserRequestFailed:!0});case ze:return Object(w.a)(Object(w.a)({},e),{},{forgotPasswordRequest:!0});case Me:return Object(w.a)(Object(w.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordRequestFailed:!1,forgotPasswordSuccess:!0});case Xe:return Object(w.a)(Object(w.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordRequestFailed:!0});case Ze:return Object(w.a)(Object(w.a)({},e),{},{resetPasswordRequest:!0});case Ve:return Object(w.a)(Object(w.a)({},e),{},{resetPasswordRequest:!1,resetPasswordRequestFailed:!1,resetPasswordSuccess:!0});case Ye:return Object(w.a)(Object(w.a)({},e),{},{resetPasswordRequest:!1,resetPasswordRequestFailed:!0});default:return e}},wsReduser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return Object(w.a)(Object(w.a)({},e),{},{wsConnected:!0});case yt:return Object(w.a)(Object(w.a)({},e),{},{wsConnected:!1});case vt:return Object(w.a)(Object(w.a)({},e),{},{orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}}}),$t={wsInit:ht,wsPrivatInit:gt,wsClose:yt,onOpen:"WS_CONNECTION_SUCCESS",onMessage:vt},en=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ht.c)(Object(Ht.a)(zt.a,function(e,t){return function(n){var c=null;return function(r){return function(a){var s=n.dispatch,o=a.type,i=t.wsInit,u=t.wsPrivatInit,d=t.wsClose,l=t.onOpen,j=t.onMessage;if(o===i&&(c=new WebSocket("".concat(e,"/all"))),o===u){var p=localStorage.getItem("accessToken");p&&(c=new WebSocket("".concat(e,"?token=").concat(p.split(" ")[1])))}c&&(o===d&&c.close(1e3,"Closed by user"),c.onopen=function(e){s({type:l,payload:e})},c.onmessage=function(e){var t=JSON.parse(e.data);s({type:j,payload:t})},c.onclose=function(e){console.log("WS connection closed")}),r(a)}}}}("".concat("wss://norma.nomoreparties.space","/orders"),$t))),tn=Object(Ht.d)(Kt,en);s.a.render(Object(v.jsx)(i.a,{store:tn,children:Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(x.a,{children:Object(v.jsx)(Jt,{})})})}),document.getElementById("root")),o()},26:function(e,t,n){e.exports={constructor:"burger-constructor_constructor__2Wifa",list:"burger-constructor_list__2lXaw",top:"burger-constructor_top__3B8eW",center:"burger-constructor_center__1jIL2",bottom:"burger-constructor_bottom__1l2yp",total:"burger-constructor_total__2z4fk",totalCont:"burger-constructor_totalCont__2bZwY",scrollCont:"burger-constructor_scrollCont__kOtU6",info:"burger-constructor_info__A3JBd",link:"burger-constructor_link__1ooeN"}},27:function(e,t,n){e.exports={feed:"feed_feed__3uAFb",feedCont:"feed_feedCont__3Q5Gn",cont:"feed_cont__3enyk",link:"feed_link__3iZay",right:"feed_right__1GQ3P",container:"feed_container__2dAnS",ordersCont:"feed_ordersCont__3EvXl",ordersWidth:"feed_ordersWidth__qSpzR",order:"feed_order__2DBCd",ordersList:"feed_ordersList__3A6g5",total:"feed_total__2rC_c"}},29:function(e,t,n){e.exports={header:"app-header_header__1iHLW",content:"app-header_content__KCd-V",nav:"app-header_nav__1_idE",logo:"app-header_logo__zVEfY",navItem:"app-header_navItem__2Tbe-",login:"app-header_login__3afH_"}},31:function(e,t,n){e.exports={id:"indredient-details_id__mILwF",idText:"indredient-details_idText__2fTcJ",image:"indredient-details_image__2qheu",light:"indredient-details_light__5OKHl",navy:"indredient-details_navy__2bOVP",details:"indredient-details_details__1JNpe",detailsCard:"indredient-details_detailsCard__2X1Z_"}},35:function(e,t,n){e.exports={id:"order-details_id__1POxV",idText:"order-details_idText__I2Tdo",image:"order-details_image__lnOoe",light:"order-details_light__3rvcO",navy:"order-details_navy__2_mPx"}},39:function(e,t,n){e.exports={tabs:"burger-ingredients_tabs__1yNyE",ingredients:"burger-ingredients_ingredients__2TY9H",title:"burger-ingredients_title__32v1n",scrollCont:"burger-ingredients_scrollCont__2XeTx",cards:"burger-ingredients_cards__xIjNZ"}},46:function(e,t,n){e.exports={card:"ingredient-card_card__1cRZ7",image:"ingredient-card_image__3LOg0",cost:"ingredient-card_cost__A5E-m",link:"ingredient-card_link__2SBZJ"}},55:function(e,t,n){e.exports={orderDetails:"modal_orderDetails__1RTQ_",closeIcon:"modal_closeIcon__1s4Qd",title:"modal_title__1efUU"}},56:function(e,t,n){e.exports={wrapper:"not-found_wrapper__zKTuj",container:"not-found_container__heFy6",content:"not-found_content__bTjDH"}},79:function(e,t,n){e.exports={App:"app_App__3t73x",title:"app_title__2Mz9y",content:"app_content__1uD0k","App-logo":"app_App-logo__1u9fY","App-logo-spin":"app_App-logo-spin__1cpH1","App-header":"app_App-header__1ofuY","App-link":"app_App-link__3q4JB"}}},[[210,1,2]]]);
//# sourceMappingURL=main.7a019cb2.chunk.js.map